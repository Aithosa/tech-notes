# 微服务：从设计到部署

## 前言

我曾经读过这本书，当时是一个同事介绍的，推荐时他描述了这本书对微服务的解释有多么深刻，于是在花了大概不到一个上午的时间读了一遍。看完后当我告诉他这本书很不错，但是我读了没有太多感觉(收获)时，当然他比较不满，觉得我在做无效阅读（没有好好读），其实我也想过这个问题，很多时候我阅读书记文章时，读后经常觉得没有任何感觉，仿佛再过一天就会把梳理所有的内容忘记，只记得自己读过这件事。

为此我咨询了 ChatGPT 和 Gemini，到底怎样才算读过这本书。以下是一些观点：

- 这本书的内容其实并不复杂，它主要介绍了微服务架构的设计原则、实现方法以及部署的最佳实践。
- 你读起来感觉很快，说明这本书的写作风格确实比较友好。
- 可能你在阅读时没有太多的感触，是因为你对微服务架构本身已经有了一定的了解，或者它的内容和你当前的实际工作需求没有太强的联系。
- 有些书籍的价值在于它带给你一种新的思维方式，或者它能引发你对某个问题的深入思考。如果你只是快速浏览，而没有停下来思考它背后的原理和潜在的影响，可能就错过了它的价值。
- 这可能是因为你没有带着特定的问题或目标去阅读，或者没有进行深入的思考和实践。

他们都建议带着一些问题去读，这些问题可以是读之前/中/后想好的，如果有必要可以多读一遍。

- 为什么要使用微服务？ 微服务解决了传统单体应用哪些痛点？它又引入了哪些新的挑战？
- 微服务架构的优势和挑战是什么？它为什么在现代软件开发中变得如此重要？
- 如何设计一个好的微服务？ 如何进行服务拆分？如何定义服务之间的接口？如何保证服务的独立性和自治性？
- 微服务架构有哪些关键组件？ API 网关、服务发现、进程间通信、数据管理等在微服务架构中扮演什么角色？
- 如何有效地将微服务架构与现有的技术栈进行整合？
- 微服务如何帮助你解决系统扩展性、灵活性和维护性的挑战？
- 如何部署和运维微服务？ 如何选择合适的部署策略？如何监控和管理大量的微服务实例？
- 我的项目是否适合采用微服务架构？ 如果要采用，应该如何进行改造？

## 正文

地址：[微服务：从设计到部署](https://docshome.gitbook.io/microservices)

### 结构

```Mermaid
mindmap
  root((微服务：从设计到部署))
    0 前言
    1 微服务简介
      1.1 构建单体应用
      1.2 走向单体地狱
      1.3 微服务-解决复杂问题
      1.4 微服务的优点
      1.5 微服务的缺点
      1.6 总结
      微服务实战：NGINX Plus 作为反向代理服务器
    2 使用 API 网关
      2.1 简介
      2.2 客户端与微服务直接通信
      2.3 使用 API 网关
      2.4 API 网关的优点与缺点
      2.5 实施 API 网关
      2.6 总结
      微服务实战：NGINX Plus 作为 API 网关
    3 进程间通信
      3.1 简介
      3.2 交互方式
      3.3 定义 API
      3.4 演化 API
      3.5 处理局部故障
      3.6 IPC 技术
      3.7 异步、基于消息的通信
      3.8 同步的请求/响应 IPC
      3.9 消息格式
      3.10 总结
      微服务实战：NGINX 与应用程序架构
    4 服务发现
      4.1 为何使用服务发现
      4.2 客户端发现模式
      4.3 服务端发现模式
      4.4 服务注册中心
      4.5 服务注册方式
      4.6 自注册模式
      4.7 第三方注册模式
      4.8 总结
      微服务实战：灵活的 NGINX
    5 事件驱动数据管理
      5.1 微服务与分布式数据管理问题
      5.2 事件驱动架构
      5.3 实现原子性
      5.4 使用本地事务发布事件
      5.5 挖掘数据库事务日志
      5.6 使用事件溯源
      5.7 总结
      微服务实战：NGINX 与存储优化
    6 选择部署策略
      6.1 动机
      6.2 单主机多服务实例模式
      6.3 每个主机一个服务实例模式
      6.4 Serverless 部署
      6.5 总结
      微服务实战：使用 NGINX 在不同主机上部署微服务
    7 重构单体应用为微服务
      7.1 微服务重构概述
      7.2 策略一：停止挖掘
      7.3 策略二：前后端分离
      7.4 策略三：提取服务
      7.5 总结
      微服务实战：使用 NGINX 征服单体
```

## 附录

### ChatGPT

这本书的内容其实并不复杂，它主要介绍了微服务架构的设计原则、实现方法以及部署的最佳实践。可能你在阅读时没有太多的感触，是因为你对微服务架构本身已经有了一定的了解，或者它的内容和你当前的实际工作需求没有太强的联系。如果你在读书时期待的是一些能直接应用到你工作中的具体工具或技术细节，那么这本书的内容可能没有满足你的需求。

另外，你朋友说你没有好好读，可能是因为有些书籍的价值在于它带给你一种新的思维方式，或者它能引发你对某个问题的深入思考。如果你只是快速浏览，而没有停下来思考它背后的原理和潜在的影响，可能就错过了它的价值。

如果你愿意，可以重新思考一下书中的几个核心问题，例如：

1. 微服务架构的优势和挑战是什么？它为什么在现代软件开发中变得如此重要？
2. 如何有效地将微服务架构与现有的技术栈进行整合？
3. 微服务如何帮助你解决系统扩展性、灵活性和维护性的挑战？

从这些问题出发，可能会帮助你挖掘更多的思考和收获。

### Gemini

你朋友推荐的《微服务：从设计到部署》（Designing and Deploying Microservices）是一本经典的微服务入门书籍，它以清晰易懂的方式介绍了微服务的核心概念和实践。你读起来感觉很快，说明这本书的写作风格确实比较友好。但读完后感觉没有收获，这可能是因为你没有带着特定的问题或目标去阅读，或者没有进行深入的思考和实践。

为了更好地理解和应用书中的知识，我建议你从以下几个方面重新审视这本书：

1. 带着问题去阅读：

   在重新阅读之前，先思考一些关于微服务的问题，例如：

   - 为什么要使用微服务？ 微服务解决了传统单体应用哪些痛点？它又引入了哪些新的挑战？
   - 如何设计一个好的微服务？ 如何进行服务拆分？如何定义服务之间的接口？如何保证服务的独立性和自治性？
   - 微服务架构有哪些关键组件？ API 网关、服务发现、进程间通信、数据管理等在微服务架构中扮演什么角色？
   - 如何部署和运维微服务？ 如何选择合适的部署策略？如何监控和管理大量的微服务实例？
   - 我的项目是否适合采用微服务架构？ 如果要采用，应该如何进行改造？

   带着这些问题去阅读，你会更加关注书中的重点，并能够更好地理解微服务的本质。

2. 关注核心概念和模式：

   《微服务：从设计到部署》涵盖了微服务架构的许多重要概念和模式，例如：

   - **API 网关：** 它是微服务架构的入口，负责请求路由、认证授权、流量控制等功能。
   - **服务发现：** 它使得服务能够动态地注册和发现彼此，从而实现服务之间的解耦。
   - **进程间通信（IPC）：** 它定义了服务之间如何进行通信，包括同步和异步两种方式。
   - **事件驱动数据管理：** 它通过事件驱动的方式来实现微服务之间的数据一致性。
   - **康威定律：** 它指出组织架构会影响系统设计，因此在采用微服务架构时需要调整组织结构。

   理解这些核心概念和模式是掌握微服务的关键。

3. 结合实际案例进行思考：

   书中可能包含一些案例，或者你可以自己寻找一些相关的案例，结合这些案例来思考如何应用书中的知识。例如，你可以思考如何将一个传统的电商网站拆分成微服务，或者如何使用不同的技术来实现服务发现和进程间通信。

4. 进行实践和总结：

   理论学习需要结合实践才能真正掌握。你可以尝试搭建一个简单的微服务 Demo，或者参与一些开源的微服务项目。在实践过程中，你会遇到各种各样的问题，这将促使你更深入地理解微服务。

   阅读完成后，进行总结也是非常重要的。你可以写一些读书笔记，或者与朋友进行交流，分享你的学习心得和体会。

**针对你提到的“没有什么想法”：**

这很正常，尤其是在初次接触一个新概念时。重要的是要主动思考，并尝试将新知识与已有的知识体系进行关联。

**针对你朋友说的“没有好好读”：**

你朋友的说法可能有些笼统。重要的是要明确“好好读”的定义是什么。对于技术书籍来说，“好好读”不仅仅是指快速地浏览一遍，更重要的是要深入理解书中的思想，并能够将其应用到实际工作中。

总而言之，《微服务：从设计到部署》是一本很好的入门书籍，但要真正掌握微服务，还需要进行深入的思考、实践和总结。希望以上建议能够帮助你更好地理解这本书，并从中获得收获。

此外，以下是一些可能有用的资源，可以帮助你更深入地学习微服务：

- **Martin Fowler 的微服务文章：** Martin Fowler 是软件开发领域的知名专家，他写了很多关于微服务的文章，非常值得阅读。
- **Spring Cloud 和 Kubernetes：** 这两个是目前最流行的微服务框架和容器编排平台。
- **一些微服务相关的博客和社区：** 例如 InfoQ、DZone 等。

希望这些信息对你有所帮助！
